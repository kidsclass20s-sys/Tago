<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, orientation=landscape" />
  <title>Football Score App</title>
  <style>
    :root {
      --bg-black: #000;
      --badge-red: #d92b2b;
      --ticker-red1: #8b0000;
      --ticker-red2: #5c0000;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: var(--bg-black);
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: Arial, sans-serif;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    /* ---------- Video ---------- */
    .video-frame {
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
    }
    .video-frame video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* ---------- LIVE Badge ---------- */
    .live-badge {
      position: absolute;
      top: 10px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 6px;
      background: var(--badge-red);
      color: #fff;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: bold;
      z-index: 20;
    }
    .live-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #fff;
      animation: pulse 1.2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); opacity:1; }
      50% { transform: scale(1.4); opacity:0.6; }
      100% { transform: scale(1); opacity:1; }
    }

    /* ---------- Score Bar ---------- */
    .score-bar {
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to bottom, #d02020, #a00000);
      color: #fff;
      border-radius: 10px;
      padding: 8px 20px;
      font-size: 14px;
      text-align: center;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 18px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }
    .team-label {
      font-size: 14px;
      text-transform: uppercase;
      font-weight: bold;
      user-select: none;
    }
    .score {
      font-size: 28px;
      font-weight: 900;
      cursor: pointer;
      user-select: none;
      line-height: 1;
    }
    .timer {
      font-size: 20px;
      font-weight: bold;
      background: #111;
      padding: 4px 12px;
      border-radius: 4px;
      color: #0f0;
      font-family: "Courier New", monospace;
      cursor: pointer;
      user-select: none;
      line-height: 1;
    }

    /* ---------- Logos (inside score bar with glow) ---------- */
    .team-logo {
      height: 44px; /* equal to score bar height */
      width: auto;
      object-fit: contain;
      filter: drop-shadow(0 0 3px #fff) drop-shadow(0 0 6px #fff);
    }

    /* ---------- Overlay Screens ---------- */
    .overlay-screen {
      position: absolute;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.7) center/cover no-repeat;
      z-index: 15;
    }
    .overlay-screen.show { display: flex; }

    .overlay-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 20px 40px;
      border-radius: 16px;
      text-align: center;
      color: #fff;
      border: 1px solid rgba(255,255,255,0.3);
      box-shadow: 0 8px 24px rgba(0,0,0,0.6), 0 0 12px rgba(255,255,255,0.15);
      transform: scale(0.9);
      transition: transform 0.6s ease, opacity 0.6s ease;
    }
    .overlay-screen.show .overlay-card { transform: scale(1); }

    .overlay-card h2 {
      font-size: 32px;
      margin-bottom: 20px;
      text-transform: uppercase;
      font-weight: 900;
      letter-spacing: 2px;
      background: linear-gradient(90deg, #ffd700, #ff8c00, #ffd700);
      background-size: 200% auto;
      color: transparent;
      -webkit-background-clip: text;
      background-clip: text;
      text-shadow: 0 0 8px rgba(255, 215, 0, 0.8),
                   0 0 16px rgba(255, 140, 0, 0.6);
      animation: shine 3s linear infinite;
    }
    @keyframes shine {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }
    .overlay-teams {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
    }
    .overlay-team {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #fff;
      font-weight: bold;
    }
    .overlay-team img {
      width: 70px;
      height: 70px;
      object-fit: contain;
      margin-bottom: 8px;
    }
    .overlay-score {
      font-size: 42px;
      font-weight: 900;
      margin: 0 10px;
    }

    /* ---------- Settings ---------- */
    .settings-btn {
      position: absolute;
      bottom: 15px;
      right: 15px;
      font-size: 22px;
      background: #fff;
      border-radius: 50%;
      padding: 6px 10px;
      cursor: pointer;
      z-index: 30;
      user-select: none;
    }
    .settings-panel {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 450px;
      background: #fff;
      padding: 14px;
      border-radius: 10px;
      display: none;
      z-index: 40;
      max-height: 80vh;
      overflow-y: auto;
    }
    .settings-panel input { width:100%; margin:6px 0 10px; }
    .settings-panel .panel-btns { display:flex; gap:8px; margin-top:6px; flex-wrap:wrap; }
    .settings-panel button { padding:8px 12px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .close-btn {
      position: absolute;
      top: 6px;
      right: 10px;
      cursor: pointer;
      font-size: 20px;
      user-select: none;
    }

    /* ---------- NEW: Match Simulation (under LIVE) - glowing orange ---------- */
    .match-simulation {
      position: absolute;
      right: 20px;
      text-transform: uppercase;
      font-weight: 900;
      letter-spacing: 1px;
      z-index: 20;
      user-select: none;
      /* orange gradient + clipped text + animated glow */
      background: linear-gradient(90deg,#ffb347,#ff6a00,#ffb347);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 6px rgba(255,160,0,0.6), 0 0 12px rgba(255,110,0,0.45);
      animation: matchGlow 2.6s linear infinite;
    }
    @keyframes matchGlow {
      0% {
        text-shadow: 0 0 6px rgba(255,160,0,0.6), 0 0 12px rgba(255,110,0,0.45);
      }
      50% {
        text-shadow: 0 0 14px rgba(255,200,0,0.95), 0 0 28px rgba(255,140,0,0.8);
      }
      100% {
        text-shadow: 0 0 6px rgba(255,160,0,0.6), 0 0 12px rgba(255,110,0,0.45);
      }
    }

    /* ---------- NEW: Bottom Ticker ---------- */
    .ticker {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 44px;
      background: linear-gradient(to bottom, var(--ticker-red1), var(--ticker-red2));
      color: #fff;
      overflow: hidden;
      z-index: 25;
      border-top: 1px solid rgba(255,255,255,0.2);
      pointer-events: none; /* so it doesn't block clicks */
    }
    /* track will be moved by JS (no CSS animation) */
    .ticker-track {
      position: absolute;
      top: 0;
      left: 0;
      white-space: nowrap;
      will-change: transform;
      transform: translateX(0);
      text-transform: uppercase;
      font-weight: 900;
      letter-spacing: 1px;
      line-height: 44px;
      text-shadow: 0 0 6px rgba(255,255,255,0.7), 0 0 14px rgba(255,255,255,0.45);
      font-size: 20px;
      padding: 0 8px;
      display: inline-block;
    }
    .ticker-track .sep { margin: 0 20px; opacity: 0.9; }

    @media (max-width: 600px) {
      .ticker { height: 36px; }
      .ticker-track { line-height: 36px; font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Video -->
    <div class="video-frame" id="videoFrame">
      <video id="gameVideo" autoplay loop muted playsinline>
        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
      </video>
    </div>

    <!-- Live badge & Score bar -->
    <div class="live-badge" id="liveBadge"><div class="live-dot"></div>LIVE</div>

    <!-- NEW: Fixed text under LIVE -->
    <div class="match-simulation" id="matchSimText">Match Simulation</div>

    <div class="score-bar">
      <img id="logoA" src="https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg" class="team-logo" />
      <div class="team-label" id="teamALabel">HOME TEAM</div>
      <div class="score"><span id="scoreA">0</span></div>
      <div class="timer" id="timer">00:00</div>
      <div class="score"><span id="scoreB">0</span></div>
      <div class="team-label" id="teamBLabel">AWAY TEAM</div>
      <img id="logoB" src="https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%28crest%29.svg" class="team-logo" />
    </div>

    <!-- Overlay -->
    <div class="overlay-screen" id="overlayScreen">
      <div class="overlay-card">
        <h2 id="overlayTitle">HALF TIME</h2>
        <div class="overlay-teams">
          <div class="overlay-team">
            <img id="overlayLogoA" src="">
            <div id="overlayNameA"></div>
          </div>
          <div class="overlay-score" id="overlayScore"></div>
          <div class="overlay-team">
            <img id="overlayLogoB" src="">
            <div id="overlayNameB"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Music Player -->
    <audio id="bgMusic" loop></audio>

    <!-- NEW: Bottom Ticker -->
    <div class="ticker" id="ticker">
      <div class="ticker-track" id="tickerTrack"></div>
    </div>

    <!-- Settings -->
    <div class="settings-btn" id="openSettingsBtn">⚙️</div>
    <div class="settings-panel" id="settingsPanel">
      <div class="close-btn" id="closeSettingsBtn">×</div>
      <h3>Settings</h3>
      <label>Team A Name</label><input type="text" id="inputTeamA" />
      <label>Team B Name</label><input type="text" id="inputTeamB" />
      <label>Team A Logo</label><input type="file" id="inputLogoA" accept="image/*" />
      <label>Team B Logo</label><input type="file" id="inputLogoB" accept="image/*" />
      <label>Gameplay Video</label><input type="file" id="inputVideo" accept="video/*" />
      <label>Background Music</label><input type="file" id="inputMusic" accept="audio/*" />
      <label>Overlay Background (Half + Full)</label><input type="file" id="inputOverlayBg" accept="image/*" />
      <label>Set Timer Start (minutes)</label><input type="number" id="inputTimerMin" min="0" value="0" />
      <label>Set Timer Start (seconds)</label><input type="number" id="inputTimerSec" min="0" max="59" value="0" />

      <!-- NEW: Ticker Text -->
      <label>Bottom Ticker Text</label>
      <input type="text" id="inputTickerText" placeholder="e.g., BREAKING NEWS • TRANSFER UPDATES • MATCH BUILD-UP" />

      <div class="panel-btns">
        <button id="applyBtn">Apply</button>
        <button id="showComingBtn">Show Coming Soon</button>
      </div>
    </div>
  </div>

  <script>
    // Scores & timer
    let scoreA=0, scoreB=0, timer=0, interval=null;
    let overlayBg=null;

    // state machine for match flow: 'idle' -> 'coming' -> 'firstHalf' -> 'halfTime' -> 'secondHalf' -> 'fullTime'
    let matchState = 'idle';

    const a=document.getElementById("scoreA"),
          b=document.getElementById("scoreB"),
          t=document.getElementById("timer"),
          overlay=document.getElementById("overlayScreen"),
          logoA=document.getElementById("logoA"),
          logoB=document.getElementById("logoB");

    a.onclick=()=>{ scoreA++; a.textContent=scoreA; };
    b.onclick=()=>{ scoreB++; b.textContent=scoreB; };

    // Timer click handler - stateful
    t.onclick = () => {
      // clear any running match timer when entering overlay states
      if (matchState === 'idle') {
        // 1st click -> show Coming Soon (persist until user hides)
        showComingSoon(overlayBg);
        matchState = 'coming';
        if(interval){ clearInterval(interval); interval = null; }
      }
      else if (matchState === 'coming') {
        // user clicked again -> hide Coming Soon and START first half timer
        overlay.classList.remove('show');
        // start timer
        interval = setInterval(()=>{
          timer++;
          t.textContent=`${String(Math.floor(timer/60)).padStart(2,"0")}:${String(timer%60).padStart(2,"0")}`;
        },1000);
        matchState = 'firstHalf';
      }
      else if (matchState === 'firstHalf') {
        // show HALF TIME overlay & pause timer
        if(interval){ clearInterval(interval); interval = null; }
        showOverlay("HALF TIME", overlayBg, false);
        matchState = 'halfTime';
      }
      else if (matchState === 'halfTime') {
        // hide half-time overlay and start/resume 2nd half timer
        overlay.classList.remove('show');
        interval = setInterval(()=>{
          timer++;
          t.textContent=`${String(Math.floor(timer/60)).padStart(2,"0")}:${String(timer%60).padStart(2,"0")}`;
        },1000);
        matchState = 'secondHalf';
      }
      else if (matchState === 'secondHalf') {
        // show FULL TIME overlay & stop timer
        if(interval){ clearInterval(interval); interval = null; }
        showOverlay("FULL TIME", overlayBg, false);
        matchState = 'fullTime';
      }
      else if (matchState === 'fullTime') {
        // Reset everything
        if(interval){ clearInterval(interval); interval = null; }
        matchState = 'idle';
        timer = 0;
        scoreA = 0;
        scoreB = 0;
        a.textContent = 0;
        b.textContent = 0;
        t.textContent = "00:00";
        overlay.classList.remove('show');
      }
    };

    // generalized overlay function: isVS true -> show "VS" in center (for Coming Soon)
    function showOverlay(title, bg, isVS = false){
      const titleEl = document.getElementById("overlayTitle");
      const logoAEl = document.getElementById("overlayLogoA");
      const logoBEl = document.getElementById("overlayLogoB");
      const nameAEl = document.getElementById("overlayNameA");
      const nameBEl = document.getElementById("overlayNameB");
      const scoreEl = document.getElementById("overlayScore");

      titleEl.textContent = title;
      logoAEl.src = logoA.src;
      logoBEl.src = logoB.src;
      nameAEl.textContent = document.getElementById("teamALabel").textContent;
      nameBEl.textContent = document.getElementById("teamBLabel").textContent;

      if(isVS){
        scoreEl.textContent = "VS";
      } else {
        scoreEl.textContent = `${scoreA} - ${scoreB}`;
      }

      overlay.classList.add("show");
      overlay.style.background = bg ? `url(${bg}) center/cover no-repeat` : "rgba(0,0,0,0.7)";
    }

    // Coming Soon helper: shows overlay and sets state to 'coming'
    function showComingSoon(bg){
      showOverlay("COMING SOON", bg, true);
      matchState = 'coming';
      // do NOT auto-hide and do NOT start timer — wait for user to click timer again
    }

    // ---------- Settings ----------
    const openBtn=document.getElementById("openSettingsBtn"),
          closeBtn=document.getElementById("closeSettingsBtn"),
          panel=document.getElementById("settingsPanel"),
          showComingBtn=document.getElementById("showComingBtn");
    openBtn.onclick=()=>panel.style.display="block";
    closeBtn.onclick=()=>panel.style.display="none";
    // settings "Show Coming Soon" button should mimic first-click behavior
    showComingBtn.onclick=()=> showComingSoon(overlayBg);

    document.getElementById("applyBtn").onclick=()=>{
      document.getElementById("teamALabel").textContent =
        document.getElementById("inputTeamA").value || "HOME TEAM";
      document.getElementById("teamBLabel").textContent =
        document.getElementById("inputTeamB").value || "AWAY TEAM";

      const logoAFile=document.getElementById("inputLogoA").files[0];
      if(logoAFile) logoA.src=URL.createObjectURL(logoAFile);

      const logoBFile=document.getElementById("inputLogoB").files[0];
      if(logoBFile) logoB.src=URL.createObjectURL(logoBFile);

      const vid=document.getElementById("inputVideo").files[0];
      if(vid) document.getElementById("gameVideo").src=URL.createObjectURL(vid);

      const music=document.getElementById("inputMusic").files[0];
      if(music) {
        const audio=document.getElementById("bgMusic");
        audio.src=URL.createObjectURL(music);
        audio.muted=false;
        audio.play().catch(err=>console.log("Autoplay blocked:",err));
      }

      const overlayFile=document.getElementById("inputOverlayBg").files[0];
      if(overlayFile) overlayBg=URL.createObjectURL(overlayFile);

      const min=parseInt(document.getElementById("inputTimerMin").value)||0;
      const sec=parseInt(document.getElementById("inputTimerSec").value)||0;
      timer=min*60+sec;
      t.textContent=`${String(min).padStart(2,"0")}:${String(sec).padStart(2,"0")}`;

      // Update ticker text from settings
      const tickerInput = document.getElementById("inputTickerText").value.trim();
      if (tickerInput) setTickerText(tickerInput);

      // Reposition "Match Simulation" in case layout changed
      positionMatchSimulation();

      panel.style.display="none";
    };

    /* ---------- Match Simulation placement under LIVE ---------- */
    function positionMatchSimulation(){
      const live = document.getElementById('liveBadge');
      const sim  = document.getElementById('matchSimText');
      if(!live || !sim) return;

      const cs = getComputedStyle(live);
      const liveTop = parseFloat(cs.top) || 0;
      const h = live.offsetHeight; // live badge height

      // Gap equal to live badge height -> top = liveTop + h (bottom) + h (gap)
      sim.style.top = (liveTop + h + h) + 'px';

      // Make text height & size visually tied to LIVE badge height
      sim.style.height = h + 'px';
      sim.style.lineHeight = h + 'px';
      sim.style.fontSize = Math.max(12, Math.round(h * 0.60)) + 'px';
    }

    /* ---------- Bottom Ticker JS Loop (single sentence -> restart immediately when ends) ---------- */
    const ticker = document.getElementById('ticker');
    const track  = document.getElementById('tickerTrack');
    let tickerAnimId = null;
    let tickerDurationSec = 30; // SPEED DOUBLED -> now faster (30s)

    // start animation loop using rAF for precise restart behavior
    function startTickerLoop(durationSec = tickerDurationSec){
      cancelTickerLoop();
      if(!ticker || !track) return;

      const containerW = ticker.offsetWidth;
      const textW = Math.max(1, track.scrollWidth);
      let x = containerW;
      const totalDistance = containerW + textW;
      const speed = totalDistance / Math.max(0.1, durationSec); // px per second

      let lastTs = null;
      function step(ts){
        if(!lastTs) lastTs = ts;
        const delta = (ts - lastTs)/1000;
        lastTs = ts;
        x -= speed * delta;
        if (x <= -textW) {
          x = containerW; // immediate restart from right
        }
        track.style.transform = `translateX(${Math.round(x)}px)`;
        tickerAnimId = requestAnimationFrame(step);
      }
      tickerAnimId = requestAnimationFrame(step);
    }
    function cancelTickerLoop(){
      if(tickerAnimId){ cancelAnimationFrame(tickerAnimId); tickerAnimId = null; }
    }

    function setTickerText(text){
      const clean = (text || '').toUpperCase().trim();
      const display = clean || 'BREAKING NEWS • MATCH UPDATES • TRANSFER ALERTS';
      // single sentence
      track.innerHTML = display;
      // allow DOM update then start
      setTimeout(()=> startTickerLoop(tickerDurationSec), 20);
    }

    // restart on resize so widths recalc
    let resizeTimer = null;
    window.addEventListener('resize', ()=>{
      positionMatchSimulation();
      if(resizeTimer) clearTimeout(resizeTimer);
      resizeTimer = setTimeout(()=> {
        startTickerLoop(tickerDurationSec);
      }, 120);
    });

    // Initialize after DOM ready
    window.addEventListener('load', ()=>{
      positionMatchSimulation();
      setTickerText('BREAKING NEWS • LIVE COMMENTARY • MATCH BUILD-UP');
    });

    // pause/resume on visibility change to save CPU
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden) cancelTickerLoop();
      else startTickerLoop(tickerDurationSec);
    });
  </script>
</body>
</html>